import vertexai
import os
import uuid
import json
from vertexai import agent_engines
from google.oauth2 import service_account

credentials_json_str = os.getenv('GOOGLE_SHEET_CREDENTIALS')
print(f'json...\n{credentials_json_str}')
credentials_info = json.loads(credentials_json_str)

creds = service_account.Credentials.from_service_account_info(
        credentials_info
    )


PROJECT_ID = os.environ.get('GOOGLE_PROJECT_ID', 'datascience-projects')
LOCATION = "us-central1" # Agent Engine is primarily supported in us-central1
vertexai.init(
    project=PROJECT_ID,
    location=LOCATION,
    credentials=creds,
)

# --- Example Usage ---
if __name__ == "__main__":
    FQN_AGENT_ID = os.environ.get('GOOGLE_AGENT_FQN')
    remote_agent = agent_engines.get(FQN_AGENT_ID)

    remote_agent.stream_query(input="Yesterday i went to teh church and got applaued by all the people there and i was happy")